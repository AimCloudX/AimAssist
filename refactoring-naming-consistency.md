# 命名の一貫性改善計画

## 概要

AimAssistのコードベース全体で命名の一貫性を確保するための計画です。命名規則を統一し、誤字や不一致を修正することで、コードの可読性と保守性を向上させます。

## 目的

- コードベース全体での命名の一貫性を確保する
- メソッド名や変数名の誤字を修正する
- 明確な命名規則を確立しドキュメント化する
- 将来の開発における命名の一貫性を維持するためのガイドラインを提供する

## 現状の問題点

- メソッド名の誤字（例: `GetConverters` vs `GetConterters`）
- 一貫性のないプレフィックスや接尾辞の使用
- 略語とフルスペルの混在（例: `Mgr` vs `Manager`）
- インターフェース命名の不一致（例: 一部に `I` プレフィックスがない）
- 単数形と複数形の混在

## 実施計画

### 1. 命名規則の確立

以下の命名規則を確立し、プロジェクト全体に適用します：

#### クラス・インターフェース命名規則

- **インターフェース**: `I` プレフィックスを使用（例: `ISettingManager`）
- **抽象クラス**: `Base` または `Abstract` サフィックスを使用（例: `ServiceBase` または `AbstractService`）
- **クラス名**: パスカルケース、略語を避ける（例: `SettingManager` 不可: `SettingMgr`）
- **実装クラス**: インターフェース名から `I` を除いた名前、または具体的な実装を示す名前（例: `DefaultSettingManager`）

#### メソッド命名規則

- パスカルケース（例: `GetValue`）
- 動詞で始める（例: `Save`, `Load`, `Create`）
- ブール値を返すメソッドは `Is`, `Has`, `Can` などで始める（例: `IsValid`, `HasPermission`）
- 一貫したアクション用語の使用（例: 取得操作には常に `Get` を使用し、`Fetch`, `Retrieve` などと混在させない）

#### 変数命名規則

- **ローカル変数・パラメータ**: キャメルケース（例: `userName`）
- **プライベートフィールド**: アンダースコアプレフィックス + キャメルケース（例: `_userName`）
- **定数**: 大文字とアンダースコア（例: `MAX_RETRY_COUNT`）または `readonly` フィールドとしてパスカルケース（例: `MaxRetryCount`）
- **静的フィールド**: パスカルケース（例: `DefaultTimeout`）

### 2. コードベース分析

コードベース全体をスキャンし、命名規則に違反している箇所を特定します：

- コード分析ツールの使用（ReSharper, StyleCop など）
- 手動でのコードレビュー
- パターンマッチングを使用した検索（正規表現など）

### 3. 修正計画の作成

特定された問題に対して、以下の情報を含む修正計画を作成します：

- 修正が必要なファイルとその場所
- 現在の名前と変更後の名前
- 依存関係と影響範囲
- 優先順位（重要度と頻度に基づく）

### 4. 段階的な修正実施

修正を以下の順序で段階的に実施します：

1. 最も重要なコアコンポーネントとインターフェースの修正
2. 頻繁に使用されるユーティリティクラスの修正
3. UI関連クラスの修正
4. プラグインシステムの修正
5. テストコードの修正

### 5. 単体テストとレビュー

各修正後に以下を実施します：

- 単体テストの実行による機能確認
- コードレビューによる命名一貫性の確認
- 統合テストによる影響範囲の確認

## 主な修正対象

以下はすでに特定されている主な修正対象です：

1. `UnitsService.Instnace` → `UnitsService.Instance`（誤字修正）
2. `GetConterters` → `GetConverters`（誤字修正）
3. `SetForegroundWindow` → `ActivateWindow`（より意味的な命名への変更）
4. 一部のクラスでの `Manager` と `Service` の混在を統一

## タイムライン

- **日1**: 命名規則のドキュメント作成とレビュー
- **日2-3**: コードベース分析と問題点の特定
- **日4-5**: 修正計画の作成と優先順位付け
- **日6-10**: 段階的な修正実施
- **日11-12**: テストとレビュー
- **日13**: ドキュメントの更新と完了レポート作成

## リスクと対策

### リスク

1. **広範囲な変更による影響**: 多くのファイルに変更が必要になり、予期しない問題が発生する可能性
2. **不完全な参照更新**: 名前変更時に一部の参照が更新されない可能性
3. **テスト不足**: テストカバレッジが不足している領域での変更リスク

### 対策

1. **段階的なアプローチ**: 小さな変更を段階的に適用し、各段階でテストを実施
2. **自動リファクタリングツールの活用**: Visual Studioのリファクタリング機能やReSharperなどのツールを活用
3. **テスト強化**: 修正前に対象領域のテストを追加
4. **バージョン管理の活用**: 各変更を個別のコミットとして管理し、問題発生時に容易にロールバック可能にする

## 完了条件

- すべての特定された命名問題が修正されている
- 命名規則ドキュメントが完成し、チームで共有されている
- すべてのテストが正常に通過している
- コードレビューが完了している
